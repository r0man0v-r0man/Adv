<nz-layout>
    <nz-content class="outer-content">
        <nz-layout class="inner-layout">
            <nz-content class="inner-content" nz-row [nzGutter]="24" nzType="flex" nzJustify="center">
                <div nz-col  [nzXs]="{ span : 24}" [nzSm]="{ span : 24}" [nzMd]="{ span: 22 }" [nzLg]="{ span : 16 }" [nzXl]="{ span : 12}">
                    <div *ngIf="!isModal"
                    class="carousel-wrap"
                    >
                        <nz-carousel [nzEffect]="'scrollx'" 
                        [nzDotPosition]="'top'">
                        <div nz-carousel-content 
                        *ngFor="let image of images; let i = index" 
                        class="carousel-img">
                            <img 
                            alt="{{ image.alt }}"
                            src="{{ image.url }}" 
                            (click)="onOpenModal()">
                        </div>
                        </nz-carousel>
                        <button nz-button nzType="primary" nzSize="large" (click)="pre()" style="border-radius: 0; width: 50%">
                            <i nz-icon nzType="left"></i>
                        </button>
                        <button nz-button nzType="primary" nzSize="large" (click)="next()" style="border-radius: 0; width: 50%;">
                            <i nz-icon nzType="right"></i>
                        </button>
                        <div class="img-row">
                            <img  *ngFor="let image of images; let i = index" 
                            (click)="goToSlide(i)"
                            src="{{ image.url }}" alt="{{ image.alt }}" >
                        </div>
                    </div>
                    <div *ngIf="isModal" class="carousel-wrap-modal">
                          <!-- The Close Button -->
                        <span *ngIf="isModal" class="close" (click)="onCloseModal()">&times;</span>
                        <nz-carousel nzEffect="scrollx" nzDotPosition="top">
                            <div nz-carousel-content class="carousel-modal-img"
                            *ngFor="let image of images; let i = index" 
                            >
                                <img style="margin: 0 auto;"
                                alt="{{ image.alt }}"
                                src="{{ image.url }}" >
                            </div>
                        </nz-carousel>
                        <button class="prev" nz-button nzType="primary" nzSize="large" (click)="pre()" style="border-radius: 0; width: 50%">
                            <i nz-icon nzType="left"></i>
                        </button>
                        <button class="next" nz-button nzType="primary" nzSize="large" (click)="next()" style="border-radius: 0; width: 50%;">
                            <i nz-icon nzType="right"></i>
                        </button>
                    </div>
                </div>
                <div *ngIf="flat" nz-col [nzXs]="{ span : 24 }" [nzSm]="{ span : 24 }" [nzMd]="{ span : 24 }" [nzLg]="{ span : 24 }" [nzXl]="{ span : 12 }">
                    <nz-page-header >
                        <nz-page-header-title>{{ flat | address : 'full' }}</nz-page-header-title>
                        <nz-page-header-subtitle>{{ flat.created | date : 'shortDate' : '' : 'ru'}}</nz-page-header-subtitle>
                        <nz-page-header-content>
                              <nz-descriptions [nzColumn]="{ xxl: 3, xl: 3, lg: 3, md: 2, sm: 1, xs: 1 }">
                                <nz-descriptions-item  nzTitle="Тип аренды">{{ flat.duration | duration }}</nz-descriptions-item>
                                <nz-descriptions-item  nzTitle="Кол-во комнат">{{ flat.rooms }}</nz-descriptions-item>
                                <nz-descriptions-item  nzTitle="Город">{{ flat.city | city }}</nz-descriptions-item>
                                <nz-descriptions-item  nzTitle="Этаж">{{ flat.floor }}</nz-descriptions-item>
                                <nz-descriptions-item  nzTitle="Этажей в доме">{{ flat.allFloor }}</nz-descriptions-item>
                              </nz-descriptions>
                        </nz-page-header-content>
                        <nz-page-header-footer>
                            <nz-row nzJustify="start" >
                                <div nz-col [nzXs]="{ span : 24 }" [nzSm]="{ span : 12 }" [nzMd]="{ span : 12 }" [nzLg]="{ span : 12 }" [nzXl]="{ span : 12 }">
                                    <nz-statistic nzTitle="Цена" [nzValue]="flat.price" nzPrefix="$"></nz-statistic>
                                </div>
                                <div nz-col [nzXs]="{ span : 24 }" [nzSm]="{ span : 12 }" [nzMd]="{ span : 12 }" [nzLg]="{ span : 12 }" [nzXl]="{ span : 12 }" style=" height: 100%;">
                                    
                                    <nz-statistic *ngIf="isShowContacts" nzTitle="Телефон" [nzValue]="flat.phoneNumberPrefix + flat.phoneNumber"></nz-statistic>
                                    <nz-statistic *ngIf="!isShowContacts"  [nzValueTemplate]="contactsButtonTpl"></nz-statistic>
                                    <ng-template #contactsButtonTpl> 
                                        <button nz-button nzSize="large" nzBlock="true" nzType="default" (click)="onShowContacts()" >
                                        <i nz-icon nzType="contacts" nzTheme="outline"></i>Телефон
                                        </button>
                                    </ng-template>
                                </div>
                            </nz-row>
                        </nz-page-header-footer>
                      </nz-page-header>
                
                <nz-descriptions 
                [nzTitle]="flatDetailComfortTitle" 
                [nzColumn]="{ xxl: 4, xl: 3, lg: 3, md: 2, sm: 1, xs: 1 }" 
                [nzColon]="false" 
                *ngIf="flat">
                    <ng-template #flatDetailComfortTitle>
                        <nz-divider [nzText]="detailComfortTitle">
                            <ng-template #detailComfortTitle>
                                Удобства
                            </ng-template>
                        </nz-divider>
                    </ng-template>
                        <nz-descriptions-item [nzSpan]="1">
                            <nz-badge nzDot [nzShowDot]="false"><ng-container *ngIf="flat.furniture; then existFurniture; else notExistFurniture"></ng-container>
                            <ng-template #existFurniture>
                                <i nz-icon nzType="check" nzTheme="outline"></i>
                            </ng-template>
                            <ng-template #notExistFurniture>
                                <i nz-icon nzType="stop" nzTheme="outline"></i>
                            </ng-template>
                            Мебель</nz-badge>
                        </nz-descriptions-item>
                        <nz-descriptions-item [nzSpan]="1">
                            <nz-badge nzDot [nzShowDot]="false"><ng-container *ngIf="flat.refrigerator; then existRefrigerator; else notExistRefrigerator"></ng-container>
                            <ng-template #existRefrigerator>
                                <i nz-icon nzType="check" nzTheme="outline"></i>
                            </ng-template>
                            <ng-template #notExistRefrigerator>
                                <i nz-icon nzType="stop" nzTheme="outline"></i>
                            </ng-template>
                            Холодильник</nz-badge>
                        </nz-descriptions-item>
                        <nz-descriptions-item [nzSpan]="1">
                            <nz-badge nzDot [nzShowDot]="false"><ng-container *ngIf="flat.microwaveOven; then existMicrowaveOven; else notExistMicrowaveOven"></ng-container>
                            <ng-template #existMicrowaveOven>
                                <i nz-icon nzType="check" nzTheme="outline"></i>
                            </ng-template>
                            <ng-template #notExistMicrowaveOven>
                                <i nz-icon nzType="stop" nzTheme="outline"></i>
                            </ng-template>
                            Микроволновая печь</nz-badge>
                        </nz-descriptions-item>
                        <nz-descriptions-item [nzSpan]="1">
                            <nz-badge nzDot [nzShowDot]="false"><ng-container *ngIf="flat.internet; then existInternet; else notExistInternet"></ng-container>
                            <ng-template #existInternet>
                                <i nz-icon nzType="check" nzTheme="outline"></i>
                            </ng-template>
                            <ng-template #notExistInternet>
                                <i nz-icon nzType="stop" nzTheme="outline"></i>
                            </ng-template>
                            Интернет</nz-badge>
                        </nz-descriptions-item>
                        <nz-descriptions-item [nzSpan]="1">
                            <nz-badge nzDot [nzShowDot]="false"><ng-container *ngIf="flat.washingMachine; then existWashingMachine; else notExistWashingMachine"></ng-container>
                            <ng-template #existWashingMachine>
                                <i nz-icon nzType="check" nzTheme="outline"></i>
                            </ng-template>
                            <ng-template #notExistWashingMachine>
                                <i nz-icon nzType="stop" nzTheme="outline"></i>
                            </ng-template>
                            Стиральная машина</nz-badge>
                        </nz-descriptions-item>
                    </nz-descriptions>
                <nz-descriptions [nzTitle]="description" [nzColumn]="3" nzColon="false">
                    <ng-template #description>
                        <nz-divider [nzText]="descriptionTitle">
                            <ng-template #descriptionTitle>
                                Описание
                            </ng-template>
                        </nz-divider>
                    </ng-template>
                    <nz-descriptions-item  [nzSpan]="3">{{ flat.description }}</nz-descriptions-item>
                </nz-descriptions>
            </div>

            </nz-content>
            <div nz-col id="map" style="height: 300px;" [nzXs]="{ span : 24}" [nzSm]="{ span : 24}" [nzMd]="{ span: 24 }" [nzLg]="{ span : 24 }" [nzXl]="{ span : 24 }">
                    
            </div>
        </nz-layout>
    </nz-content>

</nz-layout>