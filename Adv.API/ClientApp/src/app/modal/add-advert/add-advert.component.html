<form 
nz-form 
[formGroup]="form" 
[nzLayout]="'horizontal'"
>
<nz-upload
    nzAction="{{uploadUrl}}"
    nzListType="picture-card"
    [nzBeforeUpload]="beforeUpload"
    [nzRemove]="onDelete"
    [nzShowUploadList]="showUploadList"
    [(nzFileList)]="fileList"
    [nzShowButton]="fileList.length < 3"
    [nzAccept]="'image/png,image/jpeg,image/gif,image/jpg'"
    nzFileType="image/png,image/jpeg,image/gif,image/jpg"
    (nzChange)="onChange($event)"
    ><!--nzSize 3mb-->
    <p class="ant-upload-drag-icon">
        <i nz-icon nzType="upload"></i>       
    </p>
    <p class="ant-upload-text">Загрузите изображение</p>
</nz-upload>
<input nz-input type="hidden" formControlName="files">
<div nz-row [nzGutter]="24">
    <div nz-col [nzSpan]="12">
        <nz-form-item >
            <nz-form-control>
                <nz-input-group [nzSuffix]="suffixTemplate" [nzSize]="'large'">
                    <input 
                    type="text" 
                    nz-input 
                    [(ngModel)]="city" 
                    formControlName="city"
                    placeholder="Город" />
                  </nz-input-group>
                  <ng-template #suffixTemplate
                    ><i
                      nz-icon
                      nz-tooltip
                      class="ant-input-clear-icon"
                      nzTheme="fill"
                      nzType="close-circle"
                      *ngIf="city"
                      (click)="city = null"
                    ></i
                  ></ng-template>       
        </nz-form-control>
        </nz-form-item>
    </div>
    <div nz-col [nzSpan]="12">
        <nz-form-item>
            <nz-form-control>
                    <nz-input-group [nzSuffix]="suffixTemplate" [nzSize]="'large'">
                        <input 
                        type="text" 
                        nz-input 
                        [(ngModel)]="street" 
                        formControlName="street"
                        placeholder="Улица" />
                      </nz-input-group>
                      <ng-template #suffixTemplate
                        ><i
                          nz-icon
                          nz-tooltip
                          class="ant-input-clear-icon"
                          nzTheme="fill"
                          nzType="close-circle"
                          *ngIf="street"
                          (click)="street = null"
                        ></i
                      ></ng-template>       
            </nz-form-control>
        </nz-form-item>
    </div>
</div>
<div nz-row [nzGutter]="24">
    <div nz-col [nzSpan]="6">
            <nz-form-item>
                <nz-form-control
                nzHasFeedback
                nzErrorTip="Укажите номер">
                    <nz-input-number
                    [(ngModel)]="numberOfHouse"
                    [nzSize]="'large'"
                    formControlName="numberOfHouse"
                    nzPlaceHolder="Дом"
                    [nzMin]="1"
                    [nzMax]="1000"
                    [nzStep]="1"
                    [nzId]="numberOfHouse"
                    ></nz-input-number>
                </nz-form-control>
            </nz-form-item>
    </div>
    <div nz-col [nzSpan]="6">
        <nz-form-item>
            <nz-form-control>
                    <nz-input-number
                    [(ngModel)]="numberOfHouseCourpus"
                    [nzSize]="'large'"
                    formControlName="numberOfHouseCourpus"
                    nzPlaceHolder="Корпус"
                    [nzMin]="1"
                    [nzMax]="1000"
                    [nzStep]="1"
                    [nzId]="numberOfHouseCourpus"
                    ></nz-input-number>
                </nz-form-control>
        </nz-form-item>
    </div>
    <div nz-col [nzSpan]="6">
        <nz-form-item>
            <nz-form-control
            nzHasFeedback
            nzErrorTip="Укажите номер">
                    <nz-input-number
                    [(ngModel)]="numberOfSubHouse"
                    [nzSize]="'large'"
                    formControlName="numberOfSubHouse"
                    nzPlaceHolder="Подъезд"
                    [nzMin]="1"
                    [nzMax]="1000"
                    [nzStep]="1"
                    [nzId]="numberOfSubHouse"
                    ></nz-input-number>
                </nz-form-control>
        </nz-form-item>
    </div>
    <div nz-col [nzSpan]="6">
        <nz-form-item>
            <nz-form-control
            nzHasFeedback
            nzErrorTip="Укажите номер">
                    <nz-input-number
                    [(ngModel)]="numberOfFlat"
                    [nzSize]="'large'"
                    formControlName="numberOfFlat"
                    nzPlaceHolder="Квартира"
                    [nzMin]="1"
                    [nzMax]="1000"
                    [nzStep]="1"
                    [nzId]="numberOfFlat"
                    ></nz-input-number>
                </nz-form-control>
        </nz-form-item>
    </div>
</div>
<nz-form-item>
    <nz-form-control 
    nzHasFeedback 
    nzErrorTip="Укажите цену!">
        <nz-input-number
        [(ngModel)]="price"
        [nzSize]="'large'"
        formControlName="price"
        [nzPlaceHolder]="100"
        [nzMin]="10"
        [nzMax]="10000"
        [nzStep]="10"
        [nzFormatter]="formatterDollar"
        [nzParser]="parserDollar"
        [nzId]="price"
        ></nz-input-number>
    </nz-form-control>
</nz-form-item>
    <nz-form-item >
        <nz-form-control
        nzHasFeedback 
        [nzErrorTip]="descriptionErrorTpl">
                <textarea 
                [nzSize]="'large'"
                formControlName="description"
                placeholder="Ваш комментарий"
                [nzAutosize]="{ minRows: 4, maxRows: 6 }" 
                nz-input></textarea>
            <ng-template #descriptionErrorTpl let-control>
                <ng-container *ngIf="control.hasError('required')">
                    Добавьте комментарий!
                </ng-container>
                <ng-container *ngIf="control.hasError('notOnlySpace')">
                    Комментарий не должен быть пустым!
                </ng-container>
            </ng-template>
        </nz-form-control>        
    </nz-form-item>
    <p>{{ form.value | json }}</p>

</form>
